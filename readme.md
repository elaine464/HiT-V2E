# VID2E 事件相机上位机 -->
-->
## 项目简介 -->
**VID2E（Video-to-Event）** 是一个基于传统相机与事件相机融合的上位机演示程序，能够实时读取视频流／摄像头帧，计算像素灰度差分产生“事件图像”，并在界面上同时展示原始帧与事件帧，还能实时显示帧率（FPS）和事件速率。适合用于算法调试、性能测试和可视化演示。 -->
-->
## 功能概述 -->
- **原始图像采集与显示** 
  从摄像头或视频文件中读取 BGR 图像并显示。
- **事件图像生成** 
  基于像素灰度差分，使用阈值判断生成正负极性事件，绘制事件图像。
- **实时性能监控** 
  - **FPS（帧率）**：每秒钟处理的原始帧数
  - **事件速率**：每秒钟生成的事件数
- **参数可调** 
  - 亮度变化阈值
  - 事件帧周期（ms）
  - 时间衰减因子
  - 背景颜色：白／黑／灰
- **事件日志保存** 
  - 保存为 CSV
  - 保存为 NPZ（NumPy 二进制格式）
-->
## 环境要求 -->
- **操作系统**：Windows / macOS / Linux
- **Python 版本**：3.8 及以上（推荐 3.9–3.10）
- **最小硬件**：支持 OpenCV、NumPy 加速的 CPU，若有 GPU 更佳
-->
## 安装依赖 -->
-->
### 方法一：pip 
```bash -->
python3 -m pip install -r requirements.txt -->
``` -->
-->
```text -->
# requirements.txt -->
PyQt5==5.15.4 -->
numpy>=1.21.0 -->
opencv-python>=4.5.3.56 -->
``` -->
-->
### 方法二：Conda 
```bash -->
conda env create -f environment.yml -->
conda activate vid2e-wh -->
``` -->
-->
```yaml -->
# environment.yml -->
name: vid2e-wh -->
channels: -->
  - conda-forge -->
dependencies: -->
  - python=3.10 -->
  - pyqt=5.15 -->
  - numpy>=1.21.0 -->
  - opencv>=4.5.3 -->
  - pip -->
  - pip: -->
    - opencv-python>=4.5.3.56 -->
``` -->
-->
## 快速启动 -->
-->
1. **激活环境** 
   - Pip：已在当前终端安装依赖 
   - Conda：`conda activate vid2e-wh` 
2. **运行程序** 
   ```bash -->
   python main.py -->
   ``` 
3. **界面启动后** 
   - 点击“▶ 开启摄像头”开始采集 
   - 点击“■ 关闭摄像头”停止采集 
-->
## 界面说明 -->
-->
左右分为“图像显示区”和“控制区”： -->
-->
### 图像显示区 -->
1. **原始图像** 
   - 实时展示摄像头捕获的 BGR 帧 
2. **事件图像** 
   - 基于灰度差分生成的颜色事件图（红色＝正极性，蓝色＝负极性），背景色可选 
-->
### 控制区组件 -->
- **亮度变化阈值**（滑块） 
  控制生成事件的灰度差阈值，值越大敏感度越低。 
- **事件帧周期 (ms)**（滑块） 
  设置生成事件图的刷新周期，单位毫秒。 
- **时间衰减因子**（滑块） 
  对历史事件进行时间衰减处理的系数（留作扩展）。 
- **背景颜色选择**（下拉框） 
  支持 “白色背景”、“黑色背景”、“灰色背景” 三种。 
- **▶ 开启摄像头**（按钮） 
  打开默认摄像头并开始实时处理。 
- **■ 关闭摄像头**（按钮） 
  停止采集，释放摄像头资源，并清空显示区。 
- **📄 保存 CSV**（按钮） 
  将当前缓冲的事件列表保存为 CSV 格式文件。 
- **📦 保存 NPZ**（按钮） 
  将当前缓冲的事件列表保存为 NumPy `.npz` 二进制文件。 
- **FPS: 0**（标签） 
  实时显示程序处理的帧率（帧/秒）。 
- **事件速率：0 events/sec**（标签） 
  实时显示每秒生成的事件数量。 
-->
## 文件结构 -->
``` -->
├── main.py              # 主程序入口，Qt 界面与线程管理 -->
├── ui_main.py           # 界面布局定义（EventCameraUI） -->
├── camera_stream.py     # 摄像头封装，提供 read()/release() 接口 -->
├── event_generator.py   # 矢量化事件生成核心模块 -->
├── event_saver.py       # 事件列表保存为 CSV/NPZ -->
├── utils.py             # 辅助函数：背景画布、日志等 -->
├── requirements.txt     # Pip 依赖列表 -->
├── environment.yml      # Conda 环境描述 -->
└── README.md            # 本文件 -->
``` -->
-->
## 典型使用流程 -->
1. 启动 `python main.py` 
2. 调整滑块与背景色参数 
3. 点击“▶ 开启摄像头”观察原始帧与事件帧 
4. 查看左下角 FPS 与事件速率反馈 
5. 如需保存，点击“保存 CSV”或“保存 NPZ” 
-->
## 常见问题 -->
- **摄像头无法打开** 
  检查设备管理器或使用 `camera_stream.py` 中的设备索引调整。 
- **显示卡顿** 
  可适当降低分辨率或调整滑块参数；确保无其他高负载程序。 
- **依赖安装失败** 
  尝试切换国内镜像源，或使用 Conda 重建环境。 
-->
## 许可证 & 作者 -->
- **作者**：Your Name 
- **邮箱**：your.email@example.com 
- **许可证**：MIT License 
-->
--- -->
-->
> 欢迎在 GitHub Issues 中提交 Bug 报告或功能建议！ 
